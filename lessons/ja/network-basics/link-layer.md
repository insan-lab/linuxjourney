---
index: 8
lang: "ja"
title: "リンク層"
meta_title: "リンク層 - ネットワークの基礎"
meta_description: "TCP/IPのリンク層の基本を探ります。リンク層ヘッダーの構築方法、ARPによるIPアドレスからMACアドレスへの解決、ローカルネットワーク上でのパケット転送プロセスについて学びます。"
meta_keywords: "リンク層，リンク層ヘッダー, ARP, TCP/IP, MAC アドレス，ネットワーク基礎，Linux ネットワーキング，パケット転送，アドレス解決プロトコル"
---

## Lesson Content

TCP/IPモデルの**リンク層**は、ローカルネットワークセグメント上の通信を担う基盤となる層です。この層はハードウェア固有であり、ネットワークインターフェースカードや物理アドレスに直接関与します。

### フレームとリンク層ヘッダー

**リンク層**では、ネットワーク層からのパケットはフレームと呼ばれる構造にカプセル化されます。このプロセスで重要なのが**リンク層ヘッダー**の追加です。このヘッダーには、ホストの送信元および宛先 MAC アドレス、エラー検出のためのチェックサム、そして受信デバイスがフレームの終わりと次の開始を識別できるようにするためのパケット区切り文字が含まれます。

**リンク層ヘッダー**を構築するために、システムは送信元と宛先の両方の MAC アドレスを知る必要があります。送信元 MAC アドレスはわかっていますが、同じローカルネットワーク上の IP アドレスの宛先 MAC アドレスを見つける必要があります。ここでアドレス解決プロトコル（ARP）が登場します。

### ARP（アドレス解決プロトコル）

ARP は、同じネットワーク内で特定の IP アドレスに関連付けられた MAC アドレスを見つけるために使用される**リンク層**プロトコルです。宛先ホストが別のネットワーク上にある場合、パケットはデフォルトゲートウェイ（ルーター）に送信され、ARP はそのルーターの MAC アドレスを見つけるために使用されます。

システムはまず、既知の IP アドレスから MAC アドレスへのマッピングをキャッシュする ARP ルックアップテーブルを参照します。必要なアドレスがキャッシュにない場合、システムはネットワーク全体に ARP リクエストをブロードキャストします。この特別なメッセージは、「特定の IP アドレス（例：10.10.1.4）を持つホストはどれか」と尋ねます。その IP アドレスを持つホストは、自身の IP アドレスと MAC アドレスを含む ARP 応答を送信します。

必要な IP アドレスと MAC アドレスが揃ったので、**リンク層**はネットワークインターフェースカードを介してフレームを転送できるようになります。パケットの旅は、送信側と受信側の両方で TCP/IP スタックを上下に移動する際のカプセル化と非カプセル化の多段階プロセスです。

### パケットの移動

送信者（ピート）から受信者（パティ）へパケットが移動する手順は次のとおりです。

1. ピートはパティにメールを送信します。このデータはトランスポート層に送られます。
2. トランスポート層はデータを TCP または UDP ヘッダーでカプセル化し、セグメントを形成します。宛先および送信元ポートを付加し、セグメントをネットワーク層に送信します。
3. ネットワーク層はセグメントを IP パケット内にカプセル化し、送信元および宛先 IP アドレスを付加します。その後、パケットを**リンク層**にルーティングします。
4. パケットは**リンク層**に到達し、そこでフレームにカプセル化されます。送信元および宛先 MAC アドレスを含む**リンク層ヘッダー**が追加されます。
5. パティは物理層を介してこのデータフレームを受信し、データ整合性をチェックした後、非カプセル化して IP パケットをネットワーク層に送信します。
6. ネットワーク層はパケットを読み取り、送信元および宛先 IP アドレスを確認します。宛先 IP が自身の IP と一致することを確認し、パケットを非カプセル化してセグメントをトランスポート層に送信します。
7. トランスポート層はセグメントを非カプセル化し、TCP または UDP ポート番号を確認し、それらのポートに基づいてアプリケーション層への接続を確立します。
8. アプリケーション層はトランスポート層から指定されたポートでデータを受信し、それをパティに最終的なメールメッセージとして提示します。

## Exercise

練習あるのみです！リンク層、MAC アドレス、ARP の理解を深めるための実践的なラボを次に示します。

1. **[Linux で MAC アドレスと IP アドレスを識別する](https://labex.io/ja/labs/comptia-identify-mac-and-ip-addresses-in-linux-592731)** - `ip a`コマンドを使用して、Linux システム上の MAC アドレスを含むネットワークアドレッシング情報を特定する練習をします。
2. **[Linux で ping と arp を使用してネットワーク層の相互作用を調査する](https://labex.io/ja/labs/comptia-explore-network-layer-interaction-with-ping-and-arp-in-linux-592746)** - `ping`コマンドと`arp`コマンドがどのように連携して IP アドレスを MAC アドレスに解決し、ネットワーク層の相互作用を理解する方法を学びます。
3. **[Linux で tcpdump を使用してイーサネットフレームを分析する](https://labex.io/ja/labs/comptia-analyze-ethernet-frames-with-tcpdump-in-linux-592765)** - イーサネットフレーム（MAC アドレスを含む）をキャプチャおよび検査する実践的な経験を積み、低レベルのネットワーク通信を理解します。

これらのラボは、実際のシナリオで概念を適用し、リンク層におけるネットワークの基礎知識に自信をつけるのに役立ちます。

## Quiz Question

同じローカルネットワーク上のホストの MAC アドレスを見つけるために使用されるプロトコルは何ですか？（大文字の英語のアクロニムで回答してください）。

## Quiz Answer

ARP
