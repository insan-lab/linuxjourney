---
index: 3
lang: "ja"
title: "パケットの経路"
meta_title: "パケットの経路 - ルーティング"
meta_description: "ローカルネットワーク内およびインターネットを横断するデータの完全なパケット経路を探ります。Linux で IP アドレス、MAC アドレス、ARP、ルーティングテーブルがどのように連携してネットワーク通信を成功させるかを学びます。"
meta_keywords: "パケット経路，ネットワーク通信，ARP, IP アドレス，MAC アドレス，ルーティングテーブル，デフォルトゲートウェイ，Linux ネットワーキング，パケット転送"
---

## Lesson Content

ネットワークを介したデータの移動方法を理解することは、ネットワーキングの基本です。この旅は、しばしば**パケットパス**と呼ばれ、さまざまなプロトコルとハードウェアが連携して行われます。ローカルネットワーク内での通信と外部ネットワークへの通信という、2 つの一般的なシナリオで**パケットパス**を追跡してみましょう。

### ローカルネットワーク内でのパケットパス

ホストが同じローカルネットワーク上の別のホストにパケットを送信する場合、プロセスは比較的単純です。

1. まず、送信ホストは、自身の IP アドレスとサブネットマスクを比較して、宛先 IP アドレスが同じサブネット上にあるかどうかを確認します。
2. パケットを送信するには、ホストは送信元 IP、宛先 IP、送信元 MAC アドレス、宛先 MAC アドレスという 4 つの重要な情報を必要とします。当初、ホストは宛先ホストの MAC アドレスを知りません。
3. ホストは、不足している情報を探すために ARP（Address Resolution Protocol）を使用します。ローカルネットワーク上で ARP リクエストをブロードキャストし、どのデバイスがターゲットの IP アドレスを持っているかを尋ねます。対応するデバイスは MAC アドレスを返信します。
4. 宛先 MAC アドレスが判明すると、パケットは完全にアドレス指定され、ローカルネットワーク上の宛先ホストに直接送信できます。

### 外部ネットワークへのパケットパス

パケットがローカルネットワーク外のデバイス宛ての場合、パケットを転送するためにルーターが関与するプロセスが発生します。

1. 送信ホストは、宛先 IP アドレスがローカルネットワーク上にないことを確認します。ARP ブロードキャストはローカルネットワークに限定されているため、ホストは最終宛先の MAC アドレスを直接検出できません。
2. ホストはルーティングテーブルを参照します。外部 IP に対する特定のルートがないため、デフォルトルート（デフォルトゲートウェイ、つまりルーターを指す）を使用します。パケットは、元の送信元および宛先 IP アドレスで準備されます。ただし、宛先 MAC アドレスはデフォルトゲートウェイの MAC アドレスに設定されます。ゲートウェイの MAC が不明な場合は、ホストは ARP を使用してそれを探します。
3. パケットがルーターに到達すると、ルーターは宛先 IP アドレスを調べ、自身のルーティングテーブルを参照して、**パケットパス**上の次のホップを決定します。ルーターは次に、パケットの MAC アドレスを書き換えます。送信元 MAC はルーターの MAC になり、宛先 MAC は次のホップの MAC になります。このプロセスは、パス上の各ルーターで繰り返されます。
4. パケットが最終的に宛先のローカルネットワークに接続されているルーターに到着すると、そのルーターは ARP を使用して最終ホストの MAC アドレスを見つけ、パケットを配信します。
5. この旅全体を通して、パケットヘッダー内の送信元および宛先 IP アドレスは変更されません。MAC アドレスのみがホップごとに更新されます。

## Exercise

練習あるのみです！基本的な Linux ファイルおよびディレクトリ管理を強化するための実践的なラボを次に示します。

1. **[Linux での基本的なファイル操作](https://labex.io/ja/labs/linux-basic-file-operations-in-linux-18001)** - 実際の Linux 環境でファイルシステムを移動し、ファイルやディレクトリを管理し、コマンドラインショートカットを使用する練習をします。
2. **[ファイルとディレクトリの操作](https://labex.io/ja/labs/linux-file-and-directory-operations-17997)** - ディレクトリ構造を移動し、ファイルやフォルダを管理し、`ls`、`cd`、`mkdir`、`cp`、`mv`、`rm`などの強力なコマンドラインツールを使用する方法を学びます。
3. **[ファイルの整理とディレクトリの整理](https://labex.io/ja/labs/linux-organizing-files-and-directories-387877)** - `cp`、`mv`、`rm`コマンドを使用してプロジェクト構造を整理し、ファイルを移動し、不要なディレクトリをクリーンアップすることで、不可欠な Linux ファイル管理スキルを練習します。

これらのラボは、実際のシナリオで概念を適用し、Linux ファイルシステム操作に対する自信を築くのに役立ちます。

## Quiz Question

ローカルネットワーク上のホストの IP アドレスがわかっている場合、その MAC アドレスを見つけるために使用されるプロトコルは何ですか？3 文字の頭字語をすべて大文字で回答してください。

## Quiz Answer

ARP
