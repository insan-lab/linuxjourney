---
index: 4
lang: "ja"
title: "ブートプロセス：カーネル"
meta_title: "ブートプロセス：カーネル - システムの起動"
meta_description: "Linux カーネルのブートプロセスを探ります。initramfs が一時ファイルシステムからドライバをロードし、最終的なブートルートパーティションをマウントする方法を学びます。カーネルのロードから init の実行までの手順を理解します。"
meta_keywords: "ブートルート，initramfs, カーネルブート，ブートパーティション，initramfs ubuntu, /etc/default/grub, Linux ブートプロセス，ルートファイルシステム，カーネル初期化"
---

## Lesson Content

ブートローダーがカーネルをメモリにロードし、必要なパラメータを渡した後、システム制御はカーネルに移ります。次に何が起こるかを見てみましょう。

### カーネルの初期化と Initramfs

起動時の古典的な課題は、カーネルがハードウェアデバイスにアクセスするためにドライバを必要としますが、そのドライバはカーネルがまだアクセスできないストレージデバイス上に存在することが多いという点です。この問題を解決するために、Linux は一時的なルートファイルシステムを使用します。

古いシステムでは、これは`initrd`（initial RAM disk）によって処理されていました。カーネルはこのディスクイメージをロードし、必要なドライバを見つけてから、実際のルートファイルシステムに切り替えます。Ubuntu のようなディストリビューションを含む最新のシステムでは、`initramfs`（initial RAM filesystem）が使用されます。`initrd`とは異なり、`initramfs`はメモリ内に直接一時ファイルシステムとして展開される`cpio`アーカイブです。このアプローチは、ブロックデバイスを作成してマウントするオーバーヘッドを回避できるため、より効率的です。`initramfs`には、実際の`boot partition`やその他のハードウェアにアクセスするためにカーネルが必要とする、ごく基本的なモジュールのみが含まれています。

### ブートルートファイルシステムのマウント

`initramfs`からドライバがロードされると、カーネルはメインの`boot root`ファイルシステムを見つけてマウントできるようになります。このファイルシステムの場所は通常、`/etc/default/grub`のようなファイルで設定できるブートローダーによってパラメータとして渡されます。

まず、カーネルは`boot root`パーティションを読み取り専用モードでマウントします。これは、`fsck`（ファイルシステムチェック）ユーティリティがデータ破損のリスクなしにファイルシステムの整合性を検証できるようにするための安全策です。チェックが正常に完了した後、カーネルはファイルシステムを読み書きモードで再マウントします。

最後に、ルートファイルシステムが完全に利用可能になると、カーネルは最初のユーザー空間プログラムである`init`を起動します。このプログラムが、システムの残りの部分をオンラインにする責任を負います。

## Exercise

練習あるのみです！Linux ブートプロセスへの理解を深めるための実践的なラボを以下に示します。

- **[Linux で GRUB2 ブートメニューをカスタマイズする](https://labex.io/ja/labs/comptia-customize-the-grub2-boot-menu-in-linux-590859)** - タイムアウトやデフォルトのエントリの変更、これらの変更の適用など、GRUB2 ブートメニューの変更方法を学びます。このラボは、ブートローダーがどのように設定できるかを理解するのに役立ちます。

このラボは、概念を実際のシナリオに適用し、Linux ブート設定に対する自信を構築するのに役立ちます。

## Quiz Question

What is used in modern systems to load a temporary root filesystem? Please answer in English, using only lowercase letters.

## Quiz Answer

initramfs
