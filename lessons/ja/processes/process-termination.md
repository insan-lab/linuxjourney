---
index: 5
lang: "ja"
title: "プロセス終了"
meta_title: "プロセス終了 - プロセス管理"
meta_description: "Linux のプロセス終了、wait システムコール、そしてゾンビプロセスと孤児プロセスの違いについて解説します。安定したシステムのために、子プロセスの状態管理と Linux での kill 方法を学びましょう。"
meta_keywords: "Linux プロセス終了，ゾンビプロセス，孤児プロセス，ゾンビ vs 孤児プロセス，Linux 子プロセス kill, wait システムコール，_exit, プロセス管理"
---

## Lesson Content

### 終了プロセス

プロセスが作成された後、どのように終了するのでしょうか？プロセスの終了は、システムリソースが効果的に管理されることを保証する、プロセスライフサイクルの重要な部分です。

プロセスは通常、`_exit`システムコールを呼び出すことによって終了します。このアクションは、プロセスが完了し、メモリやファイル記述子などのリソースを再取得できることをカーネルに通知します。終了する際、プロセスはカーネルに終了ステータス（整数値）を提供します。慣例として、ステータス 0 は正常な実行を示し、ゼロ以外の値はエラーを示します。

しかし、`_exit`を呼び出してもプロセスは直ちに消滅しません。親プロセスは、`wait`システムコールを使用して、子プロセスの終了を認識する必要があります。このコールにより、親は子の終了ステータスを取得できます。この 2 段階のメカニズムは、適切なプロセスクリーンアップに不可欠です。`linux kill child process`を行う別の方法はシグナルを使用することですが、これは後のレッスンで詳しく説明します。

### 孤児プロセス

親プロセスが子プロセスより先に終了した場合はどうなるでしょうか？子プロセスは「孤児（orphan）」になります。元の親が`wait`を呼び出せなくなるため、カーネルが介入します。孤児プロセスは直ちに特別なシステムプロセス、通常はすべてのプロセスの祖先と見なされる`init`（プロセス ID 1）に引き取られます。その後、`init`プロセスが親の役割を引き継ぎ、採用したすべての子プロセスの終了ステータスを定期的に`wait`で収集し、それらがきれいに終了できるようにします。

### ゾンビプロセス

子プロセスが終了したが、親プロセスがまだ`wait`を呼び出していない場合、異なるシナリオが発生します。この状態では、子プロセスは「ゾンビ（zombie）」プロセスになります。カーネルはゾンビのほとんどのリソースを解放しますが、プロセステーブルのエントリは保持します。このエントリにはプロセス ID と終了ステータスが含まれ、親がそれを収集するのを待ちます。

ゾンビプロセスはすでに死んでいるため、CPU 時間を消費しません。実行されていないため、シグナルでキルすることはできません。親プロセスが`wait`を呼び出してゾンビをクリーンアップするプロセスを「レーク（reaping）」と呼びます。親プロセスが`wait`を呼び出さない場合、これらのゾンビは蓄積する可能性があります。少数であれば無害ですが、多数になるとプロセステーブルが満杯になり、新しいプロセスの作成を防ぐ可能性があります。親プロセスも終了した場合、`init`がゾンビを引き取り、レークします。

### ゾンビプロセス vs 孤児プロセス

`zombie vs orphan process`の違いを理解することは、プロセス関連の問題を診断するための鍵となります。

- **孤児プロセス**は、親が死んだアクティブな実行中のプロセスです。`init`に引き取られ、終了するまで実行を続けます。
- **ゾンビプロセス**は、実行を完了したが、まだプロセステーブルにエントリが残っている、死んだプロセスです。親プロセスが終了ステータスを読み取るのを待っています。

要するに、孤児は生きているが親がいないのに対し、ゾンビは死んでいるがまだ親によって完全にレークされていない状態です。

## Exercise

これらの概念を適用するために、次のハンズオンラボを試してください。

1. **[Linux プロセスの管理と監視](https://labex.io/ja/labs/comptia-manage-and-monitor-linux-processes-590864)** - フォアグラウンドプロセスとバックグラウンドプロセスの操作、`ps`による検査、`top`によるリソース監視、`renice`による優先度調整、`kill`による終了を実践します。このラボは、プロセスを終了する方法やその状態を観察する方法を含め、プロセスライフサイクルに関する実践的な経験を提供します。

## Quiz Question

プロセスが成功した場合の最も一般的な終了ステータスは何ですか？

## Quiz Answer

0
