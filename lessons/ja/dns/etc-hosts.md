---
index: 4
lang: "ja"
title: "/etc/hosts"
meta_title: "/etc/hosts - DNS"
meta_description: "Linux の/etc/hosts ファイルの目的を探ります。このファイルがホスト名を IP アドレスにマッピングする方法、ローカル DNS 解決における役割、Debian などのシステムでの設定方法を学びます。etc hosts linux 設定ガイド。"
meta_keywords: "/etc/hosts, etc hosts linux, debian hosts, etc host linux, etc hosts, Linux ネットワーキング，ホスト名マッピング，DNS 解決"
---

## Lesson Content

Linux システムがホスト名を解決するために DNS サーバーに問い合わせる前に、まずローカルマシンでマッピングを検索します。この最初のチェックは、名前解決プロセスの基本的な部分です。

### /etc/hostsの役割

このローカルルックアップの主要なファイルが`/etc/hosts`です。この単純なテキストファイルには、ホスト名から IP アドレスへの静的なマッピングが含まれています。`etc hosts`ファイルの構造は単純で、各行には IP アドレス、正称ホスト名、およびそのホストのオプションのエイリアスの 3 つのフィールドが含まれます。

`etc host linux`ファイルの典型的な例を次に示します。

```plaintext
pete@icebox:~$ cat /etc/hosts
127.0.0.1       localhost
127.0.1.1       icebox
```

`localhost`アドレスは、ほぼ常にデフォルトでマッピングされています。このファイルは、`Debian hosts`を含むほとんどの Linux ディストリビューションで標準的な機能です。

### etc hosts linux ファイルの編集

`/etc/hosts`ファイルを手動で編集して、独自のカスタムマッピングを作成できます。楽しい例を試してみましょう。ファイルに次の行を追加します。

```plaintext
123.45.6.7  www.google.com
```

ファイルを保存した後、Web ブラウザで`www.google.com`にアクセスしてみてください。機能しないことがわかります。これは、`www.google.com`を誤った IP アドレスにマッピングしたためです。システムはまずローカルの`/etc/hosts`ファイルを確認するため、誤ったマッピングを使用し、正しいアドレスを見つけるために DNS サーバーに問い合わせる処理に進みません。これを修正するには、追加した行を削除するだけです。

古いシステムではアクセス制御に`/etc/hosts.deny`と`/etc/hosts.allow`を使用していましたが、この方法はほとんど廃止されています。最新のセキュリティプラクティスでは、堅牢な保護のためにファイアウォールルールを設定することに依存しています。

### ローカル DNS サーバーの設定

従来、DNS ネームサーバーを指定するために`/etc/resolv.conf`ファイルが使用されていました。しかし、システム管理の進歩に伴い、このファイルは手動で管理されなくなることがよくあります。以下の例でわかるように、このファイルは別のサービスによって自動的に生成されます。DNS ネームサーバーマッピングを管理するには、`systemd-resolved`や`resolvconf`などのツールが現在これを処理しているため、使用しているディストリビューション固有のドキュメントを参照する必要があります。

```plaintext
# Dynamic resolv.conf(5) file for glibc resolver(3) generated by resolvconf(8)
#     DO NOT EDIT THIS FILE BY HAND -- YOUR CHANGES WILL BE OVERWRITTEN
nameserver 127.0.1.1
search localdomain
```

## Exercise

練習あるのみです！ローカルホスト名解決と DNS クエリの理解を深めるための実践的なラボを次に示します。

1. **[Linux でローカルホスト名解決を管理する](https://labex.io/ja/labs/comptia-manage-local-hostname-resolution-in-linux-592792)** - DNS クエリの前の重要なステップである、ローカルホスト名解決を管理するために`/etc/hosts`ファイルを編集する練習をします。
2. **[dig と nslookup で Linux の DNS レコードをクエリする](https://labex.io/ja/labs/comptia-query-dns-records-in-linux-with-dig-and-nslookup-592796)** - 重要な Linux ツールである`dig`と`nslookup`を使用して DNS レコードをクエリする方法を学び、マシンが外部名をどのように解決するかを理解します。

これらのラボは、概念を実際のシナリオに適用し、ホスト名解決と DNS に対する自信を構築するのに役立ちます。

## Quiz Question

私たちのマシンでホスト名を IP アドレスにマッピングするために使用されるファイルは何ですか？ (英語で、大文字と小文字の区別に注意して回答してください)

## Quiz Answer

/etc/hosts
